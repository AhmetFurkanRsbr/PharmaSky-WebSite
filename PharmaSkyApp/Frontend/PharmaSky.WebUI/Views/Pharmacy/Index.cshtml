@using PharmaSky.Dto
@model List<PharmacyDto>
@{
	ViewData["Title"] = "Nöbetçi Eczane";
	Layout = null;
}


<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>İstanbul Nöbetçi Eczaneleri</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<link href="https://fonts.googleapis.com" rel="preconnect">
	<link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<link href="~/css/homepageStyle.css" rel="stylesheet" />
	<link href="~/css/pharmacyStyle.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!--lOGİN BİLDİRİMLERİ İÇİN -->
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> <!--lOGİN BİLDİRİMLERİ İÇİN -->
	<!-- Partikül arka plan -->
	<div id="particles-js"></div>

	<!-- Navbar -->
	<header id="header" class="header d-flex align-items-center light-background sticky-top">
		<div class="container-fluid position-relative d-flex align-items-center justify-content-between">
			<a href="https://localhost:7291/" class="logo d-flex align-items-center me-auto me-xl-0">
				<h1 class="sitename">PharmaSky</h1>
			</a>
			<nav id="navmenu" class="navmenu">
				<ul>
					<li><a href="/Home/Index"><i class="bi bi-house"></i> Anasayfa</a></li>
					<li><a href="/Weather/Index"><i class="bi bi-cloud-sun"></i> Hava Durumu</a></li>
					<li><a href="/Pharmacy/Index" class="active"><i class="bi bi-hospital"></i> Nöbetçi Eczane</a></li>
				</ul>
			</nav>
			@{
				// "access_token" çerezinin varlığını sunucu tarafında kontrol edin
				var accessToken = Context.Request.Cookies["access_token"];

				@if (string.IsNullOrEmpty(accessToken))
				{
					<a href="/Login/Index" id="loginButtonContainer" class="btn-login-cta login-button-Left-Top">Giriş Yap</a>
					<i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
				}
				else
				{
					<div class="dropdown">
						<a class="nav-link nav-item dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
							<i class="fas fa-user-circle" style="color:cornflowerblue; font-size: 35px;"></i>
						</a>

						<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
							<li><a id="userName" class="dropdown-item ">Kullanıcı Adı</a></li>
							<li><a id="role" class="dropdown-item">Yetki</a></li>
							<li><hr class="dropdown-divider"></li>
							<li><a class="dropdown-item" href="/Login/Logout">Çıkış Yap</a></li>
						</ul>
					</div>
				}
			}
		</div>
	</header>

	<!-- Ana içerik -->
	<main>
		<div class="controls">
			<input type="text" id="search-input" placeholder="Eczane adı veya ilçe ara...">
			<select id="location-filter">
				<option value="all">Tüm İlçeler</option>
				@foreach (var county in Model
								.Where(x => !string.IsNullOrEmpty(x.CountyName))
								.Select(x => x.CountyName)
								.Distinct())
				{
					<option>@county</option>
				}
			</select>
		</div>

		<div id="pharmacy-list" class="pharmacy-grid">
			@if (Model != null && Model.Any())
			{
				@foreach (var item in Model)
				{
					<div class="pharmacy-card" data-location="@(item.CountyName ?? "Bilinmiyor")">
						<h2>@item.Name</h2>
						<p><strong>Adres:</strong> @item.Address</p>
						<p><strong>Telefon:</strong> <a href="tel:@item.Phone">@item.Phone</a></p>
						<p><strong>Konum:</strong> @(item.CountyName ?? "Bilinmiyor")</p>
						<p><strong>Uzaklık:</strong> @item.Distance</p>
					</div>
				}
			}
			else
			{
				<p class="no-results">Aradığınız kriterlere uygun eczane bulunamadı.</p>
			}
		</div>
	</main>

	<!-- Scriptler -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
	<script src="~/js/pharmacyScript.js"></script>
	<script src="~/js/homepageScript.js"></script>


</body>
</html>


